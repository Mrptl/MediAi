<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Smart Hospital Triage System</title>
    <style>
        :root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08);
  --color-bg-2: rgba(245, 158, 11, 0.08);
  --color-bg-3: rgba(34, 197, 94, 0.08);
  --color-bg-4: rgba(239, 68, 68, 0.08);
  --color-bg-5: rgba(147, 51, 234, 0.08);
  --color-bg-6: rgba(249, 115, 22, 0.08);
  --color-bg-7: rgba(236, 72, 153, 0.08);
  --color-bg-8: rgba(6, 182, 212, 0.08);

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04), 0 4px 6px -2px rgba(0, 0, 0, 0.02);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
    font-family: var(--font-family-base);
}

body {
    background-color: var(--color-background);
    color: var(--color-text);
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
    overflow-x: hidden;
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

.fade-in {
    animation: fadeIn 0.6s var(--ease-standard);
}

.slide-in {
    animation: slideIn 0.4s var(--ease-standard);
}

/* Header */
.header {
    background: linear-gradient(135deg, var(--color-primary), var(--color-teal-700));
    color: white;
    padding: var(--space-16) var(--space-32);
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: var(--shadow-md);
}

.header-content {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    display: flex;
    align-items: center;
    gap: var(--space-12);
}

.nav-buttons {
    display: flex;
    gap: var(--space-12);
}

/* Buttons */
.btn {
    padding: var(--space-12) var(--space-24);
    border: none;
    border-radius: var(--radius-base);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all var(--duration-normal) var(--ease-standard);
    display: inline-block;
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.btn-primary {
    background: var(--color-primary);
    color: var(--color-btn-primary-text);
}

.btn-primary:hover {
    background: var(--color-primary-hover);
}

.btn-secondary {
    background: var(--color-surface);
    color: var(--color-text);
    border: 1px solid var(--color-border);
}

.btn-secondary:hover {
    background: var(--color-secondary);
}

.btn-outline {
    background: transparent;
    color: white;
    border: 2px solid white;
}

.btn-outline:hover {
    background: rgba(255, 255, 255, 0.1);
}

.btn-large {
    padding: var(--space-16) var(--space-32);
    font-size: var(--font-size-lg);
}

.btn-full {
    width: 100%;
}

.btn-danger {
    background: var(--color-error);
    color: white;
}

.btn-success {
    background: var(--color-success);
    color: white;
}

/* Hero Section */
.hero {
    background: linear-gradient(135deg, var(--color-primary), var(--color-teal-700));
    color: white;
    padding: 80px var(--space-32);
    text-align: center;
}

.hero-content {
    max-width: 900px;
    margin: 0 auto;
}

.hero h1 {
    font-size: 48px;
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-24);
    line-height: var(--line-height-tight);
}

.hero p {
    font-size: var(--font-size-xl);
    margin-bottom: var(--space-32);
    opacity: 0.95;
}

.hero-buttons {
    display: flex;
    gap: var(--space-16);
    justify-content: center;
    flex-wrap: wrap;
}

/* Features Section */
.features {
    padding: 60px var(--space-32);
    max-width: 1200px;
    margin: 0 auto;
}

.section-title {
    text-align: center;
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-32);
    color: var(--color-text);
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-24);
}

.feature-card {
    background: var(--color-surface);
    padding: var(--space-32);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--color-card-border);
    transition: all var(--duration-normal) var(--ease-standard);
}

.feature-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
}

.feature-icon {
    font-size: 48px;
    margin-bottom: var(--space-16);
}

.feature-card h3 {
    font-size: var(--font-size-xl);
    margin-bottom: var(--space-12);
    color: var(--color-text);
}

.feature-card p {
    color: var(--color-text-secondary);
    line-height: 1.6;
}

/* Auth Container */
.auth-container {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-32);
    background: linear-gradient(135deg, var(--color-bg-1), var(--color-bg-3));
}

.auth-box {
    background: var(--color-surface);
    padding: var(--space-32);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    max-width: 500px;
    width: 100%;
    border: 1px solid var(--color-card-border);
}

.auth-box h2 {
    text-align: center;
    margin-bottom: var(--space-24);
    color: var(--color-text);
    font-size: var(--font-size-3xl);
}

.user-type-toggle {
    display: flex;
    gap: var(--space-12);
    margin-bottom: var(--space-24);
}

.user-type-btn {
    flex: 1;
    padding: var(--space-12);
    border: 2px solid var(--color-border);
    background: var(--color-surface);
    border-radius: var(--radius-base);
    cursor: pointer;
    font-weight: var(--font-weight-medium);
    transition: all var(--duration-normal);
}

.user-type-btn.active {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
}

.form-group {
    margin-bottom: var(--space-16);
}

.form-group label {
    display: block;
    margin-bottom: var(--space-8);
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
}

.form-control {
    width: 100%;
    padding: var(--space-12);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-base);
    font-size: var(--font-size-base);
    background: var(--color-surface);
    color: var(--color-text);
    transition: border-color var(--duration-fast);
}

.form-control:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: var(--focus-ring);
}

.error-message {
    color: var(--color-error);
    font-size: var(--font-size-sm);
    margin-top: var(--space-4);
}

.success-message {
    color: var(--color-success);
    font-size: var(--font-size-sm);
    margin-top: var(--space-4);
}

.auth-link {
    text-align: center;
    margin-top: var(--space-16);
    color: var(--color-text-secondary);
}

.auth-link a {
    color: var(--color-primary);
    cursor: pointer;
    text-decoration: none;
}

.auth-link a:hover {
    text-decoration: underline;
}

/* Dashboard */
.dashboard {
    display: flex;
    min-height: 100vh;
}

.sidebar {
    width: 260px;
    background: var(--color-surface);
    border-right: 1px solid var(--color-border);
    padding: var(--space-24);
    position: sticky;
    top: 0;
    height: 100vh;
    overflow-y: auto;
}

.sidebar-header {
    margin-bottom: var(--space-32);
}

.sidebar-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-primary);
    margin-bottom: var(--space-8);
}

.user-info {
    color: var(--color-text-secondary);
    font-size: var(--font-size-sm);
}

.sidebar-menu {
    list-style: none;
}

.sidebar-item {
    margin-bottom: var(--space-8);
}

.sidebar-link {
    display: flex;
    align-items: center;
    gap: var(--space-12);
    padding: var(--space-12);
    border-radius: var(--radius-base);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--duration-fast);
    cursor: pointer;
}

.sidebar-link:hover {
    background: var(--color-secondary);
}

.sidebar-link.active {
    background: var(--color-primary);
    color: white;
}

.main-content {
    flex: 1;
    padding: var(--space-32);
    overflow-y: auto;
}

.dashboard-header {
    margin-bottom: var(--space-32);
}

.dashboard-header h1 {
    font-size: var(--font-size-4xl);
    margin-bottom: var(--space-8);
}

.dashboard-subtitle {
    color: var(--color-text-secondary);
    font-size: var(--font-size-lg);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-24);
    margin-bottom: var(--space-32);
}

.stat-card {
    background: var(--color-surface);
    padding: var(--space-24);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--color-card-border);
    transition: transform var(--duration-normal);
}

.stat-card:hover {
    transform: translateY(-3px);
}

.stat-value {
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-primary);
    margin-bottom: var(--space-8);
}

.stat-label {
    color: var(--color-text-secondary);
    font-size: var(--font-size-base);
}

.quick-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-16);
    margin-bottom: var(--space-32);
}

.action-card {
    background: linear-gradient(135deg, var(--color-primary), var(--color-teal-700));
    color: white;
    padding: var(--space-24);
    border-radius: var(--radius-lg);
    text-align: center;
    cursor: pointer;
    transition: all var(--duration-normal);
    border: none;
}

.action-card:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-lg);
}

.action-icon {
    font-size: 36px;
    margin-bottom: var(--space-12);
}

.action-title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-medium);
}

/* Symptom Checker */
.symptom-checker {
    max-width: 800px;
    margin: 0 auto;
}

.checker-card {
    background: var(--color-surface);
    padding: var(--space-32);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    border: 1px solid var(--color-card-border);
}

.progress-bar-container {
    height: 8px;
    background: var(--color-secondary);
    border-radius: var(--radius-full);
    margin-bottom: var(--space-24);
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    background: var(--color-primary);
    transition: width var(--duration-normal);
}

.question-container {
    margin-bottom: var(--space-32);
}

.question-text {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-24);
    color: var(--color-text);
}

.options-grid {
    display: grid;
    gap: var(--space-12);
}

.option-btn {
    padding: var(--space-16);
    border: 2px solid var(--color-border);
    background: var(--color-surface);
    border-radius: var(--radius-base);
    cursor: pointer;
    text-align: left;
    font-size: var(--font-size-base);
    transition: all var(--duration-fast);
    color: var(--color-text);
}

.option-btn:hover {
    border-color: var(--color-primary);
    background: var(--color-bg-1);
}

.option-btn.selected {
    border-color: var(--color-primary);
    background: var(--color-primary);
    color: white;
}

.checkbox-group {
    display: grid;
    gap: var(--space-12);
}

.checkbox-option {
    display: flex;
    align-items: center;
    gap: var(--space-12);
    padding: var(--space-12);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-base);
    cursor: pointer;
    transition: all var(--duration-fast);
}

.checkbox-option:hover {
    background: var(--color-bg-1);
}

.checkbox-option input[type="checkbox"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
}

.slider-container {
    padding: var(--space-16);
}

.slider {
    width: 100%;
    height: 8px;
    border-radius: var(--radius-full);
    background: var(--color-secondary);
    outline: none;
    -webkit-appearance: none;
}

.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--color-primary);
    cursor: pointer;
}

.slider::-moz-range-thumb {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--color-primary);
    cursor: pointer;
    border: none;
}

.slider-value {
    text-align: center;
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-primary);
    margin-top: var(--space-16);
}

.navigation-buttons {
    display: flex;
    justify-content: space-between;
    gap: var(--space-16);
    margin-top: var(--space-32);
}

/* Results Screen */
.results-container {
    text-align: center;
}

.triage-badge {
    display: inline-block;
    padding: var(--space-16) var(--space-32);
    border-radius: var(--radius-lg);
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-24);
}

.triage-emergency {
    background: rgba(220, 38, 38, 0.15);
    color: #DC2626;
    border: 2px solid #DC2626;
}

.triage-urgent {
    background: rgba(245, 158, 11, 0.15);
    color: #F59E0B;
    border: 2px solid #F59E0B;
}

.triage-soon {
    background: rgba(252, 211, 77, 0.15);
    color: #D97706;
    border: 2px solid #FCD34D;
}

.triage-routine {
    background: rgba(16, 185, 129, 0.15);
    color: #10B981;
    border: 2px solid #10B981;
}

.triage-self-care {
    background: rgba(59, 130, 246, 0.15);
    color: #3B82F6;
    border: 2px solid #3B82F6;
}

.results-summary {
    background: var(--color-bg-1);
    padding: var(--space-24);
    border-radius: var(--radius-lg);
    margin: var(--space-24) 0;
    text-align: left;
}

.results-summary h3 {
    margin-bottom: var(--space-16);
    color: var(--color-text);
}

.symptom-list {
    list-style: none;
    padding-left: 0;
}

.symptom-list li {
    padding: var(--space-8) 0;
    border-bottom: 1px solid var(--color-card-border);
}

.symptom-list li:last-child {
    border-bottom: none;
}

.result-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-16);
    margin-top: var(--space-24);
}

/* Appointments */
.specialty-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: var(--space-16);
    margin-bottom: var(--space-32);
}

.specialty-card {
    background: var(--color-surface);
    padding: var(--space-24);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-card-border);
    text-align: center;
    cursor: pointer;
    transition: all var(--duration-normal);
}

.specialty-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
    border-color: var(--color-primary);
}

.specialty-card.selected {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
}

.doctor-list {
    display: grid;
    gap: var(--space-16);
}

.doctor-card {
    background: var(--color-surface);
    padding: var(--space-24);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-card-border);
    display: flex;
    gap: var(--space-24);
    align-items: center;
    transition: all var(--duration-normal);
}

.doctor-card:hover {
    box-shadow: var(--shadow-lg);
}

.doctor-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--color-primary), var(--color-teal-700));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
    color: white;
    flex-shrink: 0;
}

.doctor-info {
    flex: 1;
}

.doctor-name {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-4);
}

.doctor-specialty {
    color: var(--color-text-secondary);
    margin-bottom: var(--space-8);
}

.doctor-meta {
    display: flex;
    gap: var(--space-16);
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: var(--space-8);
    margin: var(--space-24) 0;
}

.calendar-day {
    padding: var(--space-12);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-base);
    text-align: center;
    cursor: pointer;
    transition: all var(--duration-fast);
    background: var(--color-surface);
}

.calendar-day:hover {
    background: var(--color-bg-1);
    border-color: var(--color-primary);
}

.calendar-day.selected {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
}

.calendar-day.disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.time-slots {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: var(--space-12);
    margin-top: var(--space-24);
}

.time-slot {
    padding: var(--space-12);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-base);
    text-align: center;
    cursor: pointer;
    transition: all var(--duration-fast);
    background: var(--color-surface);
}

.time-slot:hover {
    background: var(--color-bg-1);
    border-color: var(--color-primary);
}

.time-slot.selected {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
}

/* Health Resources */
.resources-tabs {
    display: flex;
    gap: var(--space-12);
    margin-bottom: var(--space-24);
    border-bottom: 2px solid var(--color-border);
    overflow-x: auto;
}

.tab-btn {
    padding: var(--space-12) var(--space-24);
    border: none;
    background: none;
    border-bottom: 3px solid transparent;
    cursor: pointer;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-secondary);
    transition: all var(--duration-fast);
    white-space: nowrap;
}

.tab-btn:hover {
    color: var(--color-primary);
}

.tab-btn.active {
    color: var(--color-primary);
    border-bottom-color: var(--color-primary);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.3s;
}

.articles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--space-24);
}

.article-card {
    background: var(--color-surface);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-card-border);
    overflow: hidden;
    transition: all var(--duration-normal);
    cursor: pointer;
}

.article-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
}

.article-image {
    height: 180px;
    background: linear-gradient(135deg, var(--color-bg-1), var(--color-bg-3));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 64px;
}

.article-content {
    padding: var(--space-20);
}

.article-category {
    display: inline-block;
    padding: var(--space-4) var(--space-12);
    background: var(--color-primary);
    color: white;
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    margin-bottom: var(--space-12);
}

.article-title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-12);
    color: var(--color-text);
}

.article-excerpt {
    color: var(--color-text-secondary);
    font-size: var(--font-size-sm);
    line-height: 1.6;
}

/* Music Player */
.music-player {
    background: linear-gradient(135deg, var(--color-bg-5), var(--color-bg-7));
    border-radius: var(--radius-lg);
    padding: var(--space-32);
    max-width: 600px;
    margin: 0 auto;
}

.now-playing {
    text-align: center;
    margin-bottom: var(--space-32);
}

.album-art {
    width: 200px;
    height: 200px;
    margin: 0 auto var(--space-24);
    border-radius: var(--radius-lg);
    background: linear-gradient(135deg, var(--color-primary), var(--color-teal-700));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 80px;
    box-shadow: var(--shadow-lg);
}

.track-info h3 {
    font-size: var(--font-size-2xl);
    margin-bottom: var(--space-8);
}

.track-type {
    color: var(--color-text-secondary);
}

.player-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: var(--space-24);
    margin: var(--space-24) 0;
}

.control-btn {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: none;
    background: var(--color-surface);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    transition: all var(--duration-fast);
}

.control-btn:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
}

.control-btn.play-btn {
    width: 70px;
    height: 70px;
    background: var(--color-primary);
    color: white;
    font-size: 32px;
}

.progress-container {
    margin: var(--space-24) 0;
}

.time-labels {
    display: flex;
    justify-content: space-between;
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-8);
}

.progress-track {
    height: 6px;
    background: var(--color-secondary);
    border-radius: var(--radius-full);
    position: relative;
    cursor: pointer;
}

.progress-fill {
    height: 100%;
    background: var(--color-primary);
    border-radius: var(--radius-full);
    width: 30%;
    transition: width var(--duration-fast);
}

.playlist {
    margin-top: var(--space-32);
}

.playlist h4 {
    margin-bottom: var(--space-16);
}

.playlist-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-12);
    border-radius: var(--radius-base);
    cursor: pointer;
    transition: all var(--duration-fast);
    margin-bottom: var(--space-8);
}

.playlist-item:hover {
    background: rgba(255, 255, 255, 0.1);
}

.playlist-item.active {
    background: rgba(255, 255, 255, 0.2);
}

/* Hospital Locator */
.locator-header {
    display: flex;
    gap: var(--space-12);
    margin-bottom: var(--space-24);
}

.search-input {
    flex: 1;
}

.mock-map {
    height: 300px;
    background: linear-gradient(135deg, var(--color-bg-1), var(--color-bg-3));
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-24);
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 64px;
}

.map-marker {
    position: absolute;
    width: 40px;
    height: 40px;
    background: var(--color-error);
    border-radius: 50% 50% 50% 0;
    transform: rotate(-45deg);
    animation: pulse 2s infinite;
}

.map-marker::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: 50%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

.hospital-filters {
    display: flex;
    gap: var(--space-12);
    margin-bottom: var(--space-24);
    flex-wrap: wrap;
}

.filter-chip {
    padding: var(--space-8) var(--space-16);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-full);
    background: var(--color-surface);
    cursor: pointer;
    transition: all var(--duration-fast);
    font-size: var(--font-size-sm);
}

.filter-chip:hover {
    background: var(--color-bg-1);
    border-color: var(--color-primary);
}

.filter-chip.active {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
}

.hospitals-list {
    display: grid;
    gap: var(--space-16);
}

.hospital-card {
    background: var(--color-surface);
    padding: var(--space-24);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-card-border);
    transition: all var(--duration-normal);
}

.hospital-card:hover {
    box-shadow: var(--shadow-lg);
}

.hospital-header {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: var(--space-16);
}

.hospital-name {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-4);
}

.hospital-distance {
    color: var(--color-primary);
    font-weight: var(--font-weight-medium);
}

.emergency-badge {
    background: var(--color-error);
    color: white;
    padding: var(--space-4) var(--space-12);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
}

.hospital-details {
    color: var(--color-text-secondary);
    margin-bottom: var(--space-16);
}

.hospital-specialties {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-8);
    margin-bottom: var(--space-16);
}

.specialty-tag {
    padding: var(--space-4) var(--space-12);
    background: var(--color-bg-1);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
}

.hospital-actions {
    display: flex;
    gap: var(--space-12);
}

/* Quiz */
.quiz-container {
    max-width: 700px;
    margin: 0 auto;
}

.quiz-question {
    background: var(--color-surface);
    padding: var(--space-32);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-24);
    border: 1px solid var(--color-card-border);
}

.question-number {
    color: var(--color-primary);
    font-weight: var(--font-weight-medium);
    margin-bottom: var(--space-12);
}

.quiz-options {
    display: grid;
    gap: var(--space-12);
}

.quiz-option {
    padding: var(--space-16);
    border: 2px solid var(--color-border);
    border-radius: var(--radius-base);
    cursor: pointer;
    transition: all var(--duration-fast);
    background: var(--color-surface);
}

.quiz-option:hover {
    border-color: var(--color-primary);
    background: var(--color-bg-1);
}

.quiz-option.correct {
    border-color: var(--color-success);
    background: rgba(var(--color-success-rgb), 0.1);
}

.quiz-option.incorrect {
    border-color: var(--color-error);
    background: rgba(var(--color-error-rgb), 0.1);
}

.quiz-feedback {
    margin-top: var(--space-16);
    padding: var(--space-16);
    border-radius: var(--radius-base);
    background: var(--color-bg-1);
}

.quiz-results {
    text-align: center;
    padding: var(--space-32);
}

.quiz-score {
    font-size: 72px;
    font-weight: var(--font-weight-bold);
    color: var(--color-primary);
    margin: var(--space-24) 0;
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    padding: var(--space-24);
}

.modal.active {
    display: flex;
}

.modal-content {
    background: var(--color-surface);
    border-radius: var(--radius-lg);
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    animation: fadeIn 0.3s;
}

.modal-header {
    padding: var(--space-24);
    border-bottom: 1px solid var(--color-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-title {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-semibold);
}

.close-modal {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: var(--color-text-secondary);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-base);
    transition: all var(--duration-fast);
}

.close-modal:hover {
    background: var(--color-secondary);
}

.modal-body {
    padding: var(--space-24);
}

/* Doctor Dashboard Specific */
.patient-queue {
    display: grid;
    gap: var(--space-16);
}

.queue-patient {
    background: var(--color-surface);
    padding: var(--space-24);
    border-radius: var(--radius-lg);
    border-left: 4px solid;
    display: flex;
    justify-content: space-between;
    align-items: start;
    transition: all var(--duration-normal);
}

.queue-patient:hover {
    box-shadow: var(--shadow-lg);
}

.queue-patient.emergency {
    border-left-color: #DC2626;
}

.queue-patient.urgent {
    border-left-color: #F59E0B;
}

.queue-patient.soon {
    border-left-color: #FCD34D;
}

.queue-patient.routine {
    border-left-color: #10B981;
}

.patient-details h4 {
    margin-bottom: var(--space-8);
}

.patient-meta {
    color: var(--color-text-secondary);
    font-size: var(--font-size-sm);
    margin-bottom: var(--space-12);
}

.chief-complaint {
    background: var(--color-bg-1);
    padding: var(--space-12);
    border-radius: var(--radius-base);
    margin-bottom: var(--space-12);
}

.appointment-list {
    display: grid;
    gap: var(--space-16);
}

.appointment-card {
    background: var(--color-surface);
    padding: var(--space-20);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-card-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.appointment-time {
    font-weight: var(--font-weight-semibold);
    color: var(--color-primary);
    margin-bottom: var(--space-4);
}

/* Responsive */
@media (max-width: 768px) {
    .dashboard {
        flex-direction: column;
    }
    
    .sidebar {
        width: 100%;
        height: auto;
        position: relative;
    }
    
    .hero h1 {
        font-size: 32px;
    }
    
    .features-grid,
    .stats-grid,
    .quick-actions,
    .specialty-grid,
    .articles-grid {
        grid-template-columns: 1fr;
    }
    
    .doctor-card {
        flex-direction: column;
        text-align: center;
    }
    
    .calendar-grid {
        grid-template-columns: repeat(4, 1fr);
    }
    
    .music-player {
        padding: var(--space-24);
    }
    
    .album-art {
        width: 150px;
        height: 150px;
    }
}

/* Utility Classes */
.hidden {
    display: none !important;
}

.text-center {
    text-align: center;
}

.mt-16 {
    margin-top: var(--space-16);
}

.mt-24 {
    margin-top: var(--space-24);
}

.mb-16 {
    margin-bottom: var(--space-16);
}

.mb-24 {
    margin-bottom: var(--space-24);
}
    </style>
</head>
<body>
    <!-- Landing Page -->
    <div id="landing-page" class="fade-in">
        <header class="header">
            <div class="header-content">
                <div class="logo">üè• AI Hospital Triage</div>
                <div class="nav-buttons">
                    <button class="btn btn-outline" onclick="showLogin()">Login</button>
                    <button class="btn btn-outline" onclick="showSignup()">Sign Up</button>
                </div>
            </div>
        </header>

        <section class="hero">
            <div class="hero-content">
                <h1>AI-Powered Smart Hospital Triage System</h1>
                <p>Get instant health assessments, book appointments with specialists, and access emergency care - all powered by advanced AI technology.</p>
                <div class="hero-buttons">
                    <button class="btn btn-outline btn-large" onclick="showSignup()">Get Started Free</button>
                    <button class="btn btn-outline btn-large" onclick="scrollToFeatures()">Learn More</button>
                </div>
            </div>
        </section>

        <section class="features" id="features">
            <h2 class="section-title">Powerful Features for Better Healthcare</h2>
            <div class="features-grid">
                <div class="feature-card slide-in">
                    <div class="feature-icon">ü§ñ</div>
                    <h3>AI Symptom Checker</h3>
                    <p>Advanced AI-powered symptom assessment with intelligent branching questions to accurately understand your health concerns.</p>
                </div>
                <div class="feature-card slide-in">
                    <div class="feature-icon">‚öïÔ∏è</div>
                    <h3>Smart Triage System</h3>
                    <p>Get instant priority assessment from routine checkups to emergency care recommendations based on your symptoms.</p>
                </div>
                <div class="feature-card slide-in">
                    <div class="feature-icon">üìÖ</div>
                    <h3>Easy Appointments</h3>
                    <p>Book appointments with specialized doctors at your convenience with our streamlined scheduling system.</p>
                </div>
                <div class="feature-card slide-in">
                    <div class="feature-icon">üìö</div>
                    <h3>Health Resources</h3>
                    <p>Access curated health articles, interactive quizzes, and relaxation tools to support your wellness journey.</p>
                </div>
                <div class="feature-card slide-in">
                    <div class="feature-icon">üè•</div>
                    <h3>Hospital Locator</h3>
                    <p>Find the nearest hospitals and emergency care centers instantly when you need immediate medical attention.</p>
                </div>
                <div class="feature-card slide-in">
                    <div class="feature-icon">üîí</div>
                    <h3>Secure &amp; Private</h3>
                    <p>Your health data is protected with enterprise-grade security and complete privacy compliance.</p>
                </div>
            </div>
        </section>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="auth-container hidden">
        <div class="auth-box fade-in">
            <h2>Welcome Back</h2>
            <div class="user-type-toggle">
                <button class="user-type-btn active" onclick="selectLoginType('patient')">Patient</button>
                <button class="user-type-btn" onclick="selectLoginType('doctor')">Doctor</button>
            </div>
            <form id="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" id="login-email" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" class="form-control" id="login-password" required>
                </div>
                <div id="login-error" class="error-message"></div>
                <button type="submit" class="btn btn-primary btn-full btn-large mt-16">Login</button>
            </form>
            <div class="auth-link">
                Don't have an account? <a onclick="showSignup()">Sign Up</a>
            </div>
        </div>
    </div>

    <!-- Signup Page -->
    <div id="signup-page" class="auth-container hidden">
        <div class="auth-box fade-in">
            <h2>Create Account</h2>
            <div class="user-type-toggle">
                <button class="user-type-btn active" onclick="selectSignupType('patient')">Patient</button>
                <button class="user-type-btn" onclick="selectSignupType('doctor')">Doctor</button>
            </div>
            <form id="signup-form" onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" class="form-control" id="signup-name" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" id="signup-email" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" class="form-control" id="signup-password" required minlength="6">
                </div>
                
                <!-- Patient-specific fields -->
                <div id="patient-fields">
                    <div class="form-group">
                        <label>Date of Birth</label>
                        <input type="date" class="form-control" id="signup-dob">
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" class="form-control" id="signup-phone">
                    </div>
                    <div class="form-group">
                        <label>Address</label>
                        <input type="text" class="form-control" id="signup-address">
                    </div>
                </div>
                
                <!-- Doctor-specific fields -->
                <div id="doctor-fields" class="hidden">
                    <div class="form-group">
                        <label>Medical License Number</label>
                        <input type="text" class="form-control" id="signup-license">
                    </div>
                    <div class="form-group">
                        <label>Specialization</label>
                        <select class="form-control" id="signup-specialization">
                            <option value="">Select Specialization</option>
                            <option value="General Medicine">General Medicine</option>
                            <option value="Cardiology">Cardiology</option>
                            <option value="Neurology">Neurology</option>
                            <option value="Orthopedics">Orthopedics</option>
                            <option value="Pediatrics">Pediatrics</option>
                            <option value="Dermatology">Dermatology</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" class="form-control" id="signup-doctor-phone">
                    </div>
                    <div class="form-group">
                        <label>Hospital Affiliation</label>
                        <input type="text" class="form-control" id="signup-hospital">
                    </div>
                </div>
                
                <div id="signup-error" class="error-message"></div>
                <button type="submit" class="btn btn-primary btn-full btn-large mt-16">Create Account</button>
            </form>
            <div class="auth-link">
                Already have an account? <a onclick="showLogin()">Login</a>
            </div>
        </div>
    </div>

    <!-- Patient Dashboard -->
    <div id="patient-dashboard" class="dashboard hidden">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">üè• AI Triage</div>
                <div class="user-info" id="patient-name-sidebar"></div>
            </div>
            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <a class="sidebar-link active" onclick="showPatientSection('overview')">üìä Dashboard</a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" onclick="showPatientSection('symptom-checker')">ü§ñ AI Symptom Checker</a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" onclick="showPatientSection('appointments')">üìÖ Book Appointment</a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" onclick="showPatientSection('my-appointments')">üìã My Appointments</a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" onclick="showPatientSection('resources')">üìö Health Resources</a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" onclick="logout()">üö™ Logout</a>
                </li>
            </ul>
        </aside>

        <main class="main-content">
            <!-- Dashboard Overview -->
            <div id="patient-overview" class="fade-in">
                <div class="dashboard-header">
                    <h1 id="patient-welcome">Welcome back!</h1>
                    <p class="dashboard-subtitle">Here's your health dashboard overview</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="stat-appointments">0</div>
                        <div class="stat-label">Upcoming Appointments</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-assessments">0</div>
                        <div class="stat-label">AI Assessments</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">24/7</div>
                        <div class="stat-label">Available Support</div>
                    </div>
                </div>

                <h3 class="mb-16">Quick Actions</h3>
                <div class="quick-actions">
                    <button class="action-card" onclick="showPatientSection('symptom-checker')">
                        <div class="action-icon">ü§ñ</div>
                        <div class="action-title">Start AI Assessment</div>
                    </button>
                    <button class="action-card" onclick="showPatientSection('appointments')">
                        <div class="action-icon">üìÖ</div>
                        <div class="action-title">Book Appointment</div>
                    </button>
                    <button class="action-card" onclick="showPatientSection('resources')">
                        <div class="action-icon">üìö</div>
                        <div class="action-title">Health Resources</div>
                    </button>
                    <button class="action-card" onclick="showResourceTab('hospital-locator')">
                        <div class="action-icon">üè•</div>
                        <div class="action-title">Find Hospital</div>
                    </button>
                </div>

                <h3 class="mt-24 mb-16">Upcoming Appointments</h3>
                <div id="upcoming-appointments" class="appointment-list">
                    <p class="text-center" style="color: var(--color-text-secondary);">No upcoming appointments</p>
                </div>
            </div>

            <!-- AI Symptom Checker Section -->
            <div id="patient-symptom-checker" class="symptom-checker hidden">
                <div id="symptom-checker-content"></div>
            </div>

            <!-- Book Appointment Section -->
            <div id="patient-appointments" class="hidden">
                <div id="appointment-content"></div>
            </div>

            <!-- My Appointments Section -->
            <div id="patient-my-appointments" class="hidden">
                <div class="dashboard-header">
                    <h1>My Appointments</h1>
                    <p class="dashboard-subtitle">View and manage your scheduled appointments</p>
                </div>
                <div id="all-appointments-list" class="appointment-list"></div>
            </div>

            <!-- Health Resources Section -->
            <div id="patient-resources" class="hidden">
                <div class="dashboard-header">
                    <h1>Health Resources</h1>
                    <p class="dashboard-subtitle">Access articles, quizzes, relaxation tools, and emergency services</p>
                </div>
                <div id="resources-content"></div>
            </div>
        </main>
    </div>

    <!-- Doctor Dashboard -->
    <div id="doctor-dashboard" class="dashboard hidden">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">üè• AI Triage</div>
                <div class="user-info" id="doctor-name-sidebar"></div>
            </div>
            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <a class="sidebar-link active" onclick="showDoctorSection('overview')">üìä Dashboard</a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" onclick="showDoctorSection('queue')">üë• Patient Queue</a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" onclick="showDoctorSection('appointments')">üìÖ Appointments</a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" onclick="logout()">üö™ Logout</a>
                </li>
            </ul>
        </aside>

        <main class="main-content">
            <!-- Doctor Overview -->
            <div id="doctor-overview" class="fade-in">
                <div class="dashboard-header">
                    <h1 id="doctor-welcome">Welcome, Doctor!</h1>
                    <p class="dashboard-subtitle" id="doctor-specialty"></p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="stat-today-appointments">0</div>
                        <div class="stat-label">Today's Appointments</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-pending-patients">0</div>
                        <div class="stat-label">Pending Patients</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-completed">0</div>
                        <div class="stat-label">Completed Today</div>
                    </div>
                </div>

                <h3 class="mt-24 mb-16">Urgent Patient Queue</h3>
                <div id="urgent-queue" class="patient-queue"></div>
            </div>

            <!-- Patient Queue Section -->
            <div id="doctor-queue" class="hidden">
                <div class="dashboard-header">
                    <h1>Patient Queue</h1>
                    <p class="dashboard-subtitle">Triaged patients sorted by urgency</p>
                </div>
                <div id="full-queue" class="patient-queue"></div>
            </div>

            <!-- Appointments Section -->
            <div id="doctor-appointments" class="hidden">
                <div class="dashboard-header">
                    <h1>Today's Appointments</h1>
                    <p class="dashboard-subtitle">Scheduled consultations</p>
                </div>
                <div id="doctor-appointments-list" class="appointment-list"></div>
            </div>
        </main>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title">Modal</h3>
                <button class="close-modal" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <script>
        // Data Storage
        const appData = {
            users: {
                patients: [],
                doctors: []
            },
            appointments: [],
            symptomAssessments: [],
            currentUser: null,
            loginType: 'patient',
            signupType: 'patient'
        };

        // Sample Data
        const sampleDoctors = [
            { name: "Dr. Sarah Johnson", specialization: "Cardiology", experience: "15 years", rating: 4.8, availability: "Mon-Fri" },
            { name: "Dr. Michael Chen", specialization: "Neurology", experience: "12 years", rating: 4.9, availability: "Mon-Sat" },
            { name: "Dr. Emily Rodriguez", specialization: "General Medicine", experience: "10 years", rating: 4.7, availability: "Mon-Sun" },
            { name: "Dr. James Williams", specialization: "Orthopedics", experience: "18 years", rating: 4.9, availability: "Mon-Fri" },
            { name: "Dr. Lisa Anderson", specialization: "Pediatrics", experience: "14 years", rating: 4.8, availability: "Mon-Sat" },
            { name: "Dr. Robert Taylor", specialization: "Dermatology", experience: "11 years", rating: 4.6, availability: "Mon-Fri" }
        ];

        const healthArticles = [
            { title: "Understanding Diabetes Management", category: "Diabetes", excerpt: "Learn essential tips for managing diabetes through diet, exercise, and medication.", content: "Diabetes management requires a comprehensive approach. Start with monitoring blood sugar levels regularly, maintain a balanced diet rich in vegetables and whole grains, exercise for at least 30 minutes daily, and take medications as prescribed. Work closely with your healthcare team to adjust your treatment plan as needed." },
            { title: "Heart Health: Prevention and Care", category: "Cardiology", excerpt: "Discover how to maintain a healthy heart through lifestyle choices.", content: "Heart health is crucial for overall wellbeing. Key steps include regular cardiovascular exercise, maintaining healthy cholesterol and blood pressure levels, avoiding smoking, limiting alcohol intake, managing stress, and eating a heart-healthy diet low in saturated fats and high in omega-3 fatty acids." },
            { title: "Mental Wellness in Modern Life", category: "Mental Health", excerpt: "Strategies for maintaining mental health and managing stress.", content: "Mental wellness requires daily attention. Practice mindfulness meditation, maintain social connections, get adequate sleep, exercise regularly, set healthy boundaries, seek professional help when needed, and engage in activities that bring joy and fulfillment." },
            { title: "Nutrition Basics for Better Health", category: "Nutrition", excerpt: "Essential nutrition guidelines for a healthier lifestyle.", content: "Good nutrition is foundational to health. Focus on whole foods, eat a variety of colorful fruits and vegetables, choose whole grains over refined carbs, include lean proteins, stay hydrated with water, limit processed foods and added sugars, and practice portion control." },
            { title: "Sleep Hygiene Best Practices", category: "Sleep Health", excerpt: "Improve your sleep quality with these proven techniques.", content: "Quality sleep is essential for health. Establish a consistent sleep schedule, create a relaxing bedtime routine, keep your bedroom cool and dark, avoid screens before bed, limit caffeine after noon, exercise regularly but not close to bedtime, and manage stress through relaxation techniques." },
            { title: "Exercise for Every Age", category: "Fitness", excerpt: "Age-appropriate exercise guidelines for optimal health.", content: "Regular physical activity is vital at every age. Children need active play, adults benefit from cardio and strength training, and seniors should focus on balance and flexibility exercises. Always consult your doctor before starting a new exercise program." }
        ];

        const hospitals = [
            { name: "City General Hospital", distance: "1.2 km", address: "123 Main Street, Downtown", emergency: "911", specialties: ["Emergency Care", "Trauma Center", "Cardiology"], is_24_7: true },
            { name: "St. Mary's Medical Center", distance: "2.5 km", address: "456 Oak Avenue, Midtown", emergency: "911", specialties: ["Pediatrics", "Maternity", "Orthopedics"], is_24_7: true },
            { name: "Regional Trauma Center", distance: "3.8 km", address: "789 Hospital Drive, Northside", emergency: "911", specialties: ["Trauma Care", "Emergency Surgery", "ICU"], is_24_7: true },
            { name: "Community Health Clinic", distance: "0.8 km", address: "321 Community Blvd, Central", emergency: "Non-emergency only", specialties: ["General Medicine", "Family Practice"], is_24_7: false }
        ];

        const musicTracks = [
            { title: "Ocean Waves Meditation", duration: "15:30", type: "Nature Sounds" },
            { title: "Forest Rain Sounds", duration: "20:45", type: "Nature Sounds" },
            { title: "Peaceful Piano", duration: "12:20", type: "Instrumental" },
            { title: "Deep Sleep Music", duration: "30:00", type: "Ambient" },
            { title: "Stress Relief Sounds", duration: "18:15", type: "Therapeutic" },
            { title: "Calm Morning", duration: "10:30", type: "Meditation" },
            { title: "Evening Relaxation", duration: "25:00", type: "Ambient" }
        ];

        const quizQuestions = [
            { question: "How much water should an average adult drink per day?", options: ["2 liters", "4 liters", "1 liter", "5 liters"], correct: 0, explanation: "Adults should drink approximately 2 liters (8 glasses) of water daily." },
            { question: "What is the recommended hours of sleep for adults?", options: ["5-6 hours", "7-9 hours", "10-12 hours", "4-5 hours"], correct: 1, explanation: "Adults need 7-9 hours of quality sleep per night for optimal health." },
            { question: "Which vitamin is produced when skin is exposed to sunlight?", options: ["Vitamin A", "Vitamin C", "Vitamin D", "Vitamin E"], correct: 2, explanation: "Vitamin D is synthesized in the skin when exposed to sunlight." },
            { question: "What is a normal resting heart rate for adults?", options: ["40-50 bpm", "60-100 bpm", "100-120 bpm", "120-140 bpm"], correct: 1, explanation: "A normal resting heart rate for adults ranges from 60 to 100 beats per minute." },
            { question: "How often should you exercise per week?", options: ["Once", "2-3 times", "4-5 times", "Every day"], correct: 2, explanation: "Adults should aim for at least 150 minutes of moderate exercise per week, typically 4-5 sessions." }
        ];

        // Navigation Functions
        function showLanding() {
            hideAllPages();
            document.getElementById('landing-page').classList.remove('hidden');
        }

        function showLogin() {
            hideAllPages();
            document.getElementById('login-page').classList.remove('hidden');
        }

        function showSignup() {
            hideAllPages();
            document.getElementById('signup-page').classList.remove('hidden');
        }

        function hideAllPages() {
            document.getElementById('landing-page').classList.add('hidden');
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('signup-page').classList.add('hidden');
            document.getElementById('patient-dashboard').classList.add('hidden');
            document.getElementById('doctor-dashboard').classList.add('hidden');
        }

        function scrollToFeatures() {
            document.getElementById('features').scrollIntoView({ behavior: 'smooth' });
        }

        function selectLoginType(type) {
            appData.loginType = type;
            const buttons = document.querySelectorAll('#login-page .user-type-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        function selectSignupType(type) {
            appData.signupType = type;
            const buttons = document.querySelectorAll('#signup-page .user-type-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (type === 'patient') {
                document.getElementById('patient-fields').classList.remove('hidden');
                document.getElementById('doctor-fields').classList.add('hidden');
            } else {
                document.getElementById('patient-fields').classList.add('hidden');
                document.getElementById('doctor-fields').classList.remove('hidden');
            }
        }

        // Authentication
        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const errorDiv = document.getElementById('login-error');
            
            const userArray = appData.loginType === 'patient' ? appData.users.patients : appData.users.doctors;
            const user = userArray.find(u => u.email === email && u.password === password);
            
            if (user) {
                appData.currentUser = { ...user, type: appData.loginType };
                errorDiv.textContent = '';
                
                if (appData.loginType === 'patient') {
                    showPatientDashboard();
                } else {
                    showDoctorDashboard();
                }
            } else {
                errorDiv.textContent = 'Invalid email or password';
            }
        }

        function handleSignup(event) {
            event.preventDefault();
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const errorDiv = document.getElementById('signup-error');
            
            const userArray = appData.signupType === 'patient' ? appData.users.patients : appData.users.doctors;
            
            if (userArray.find(u => u.email === email)) {
                errorDiv.textContent = 'Email already registered';
                return;
            }
            
            const newUser = { name, email, password };
            
            if (appData.signupType === 'patient') {
                newUser.dob = document.getElementById('signup-dob').value;
                newUser.phone = document.getElementById('signup-phone').value;
                newUser.address = document.getElementById('signup-address').value;
                appData.users.patients.push(newUser);
            } else {
                newUser.license = document.getElementById('signup-license').value;
                newUser.specialization = document.getElementById('signup-specialization').value;
                newUser.phone = document.getElementById('signup-doctor-phone').value;
                newUser.hospital = document.getElementById('signup-hospital').value;
                appData.users.doctors.push(newUser);
            }
            
            appData.currentUser = { ...newUser, type: appData.signupType };
            errorDiv.textContent = '';
            
            if (appData.signupType === 'patient') {
                showPatientDashboard();
            } else {
                showDoctorDashboard();
            }
        }

        function logout() {
            appData.currentUser = null;
            showLanding();
        }

        // Patient Dashboard
        function showPatientDashboard() {
            hideAllPages();
            document.getElementById('patient-dashboard').classList.remove('hidden');
            document.getElementById('patient-name-sidebar').textContent = appData.currentUser.name;
            document.getElementById('patient-welcome').textContent = `Welcome back, ${appData.currentUser.name}!`;
            updatePatientStats();
            showPatientSection('overview');
        }

        function showPatientSection(section) {
            const sections = ['overview', 'symptom-checker', 'appointments', 'my-appointments', 'resources'];
            sections.forEach(s => {
                document.getElementById(`patient-${s}`).classList.add('hidden');
            });
            document.getElementById(`patient-${section}`).classList.remove('hidden');
            
            const links = document.querySelectorAll('#patient-dashboard .sidebar-link');
            links.forEach(link => link.classList.remove('active'));
            event.target.classList.add('active');
            
            if (section === 'symptom-checker') {
                initSymptomChecker();
            } else if (section === 'appointments') {
                initAppointmentBooking();
            } else if (section === 'resources') {
                initHealthResources();
            } else if (section === 'my-appointments') {
                displayAllAppointments();
            }
        }

        function updatePatientStats() {
            const userAppointments = appData.appointments.filter(a => a.patientEmail === appData.currentUser.email);
            const assessments = appData.symptomAssessments.filter(a => a.patientEmail === appData.currentUser.email);
            
            document.getElementById('stat-appointments').textContent = userAppointments.length;
            document.getElementById('stat-assessments').textContent = assessments.length;
            
            displayUpcomingAppointments();
        }

        function displayUpcomingAppointments() {
            const container = document.getElementById('upcoming-appointments');
            const userAppointments = appData.appointments.filter(a => a.patientEmail === appData.currentUser.email);
            
            if (userAppointments.length === 0) {
                container.innerHTML = '<p class="text-center" style="color: var(--color-text-secondary);">No upcoming appointments</p>';
                return;
            }
            
            container.innerHTML = userAppointments.map(apt => `
                <div class="appointment-card">
                    <div>
                        <div class="appointment-time">${apt.date} at ${apt.time}</div>
                        <div><strong>${apt.doctor}</strong></div>
                        <div style="color: var(--color-text-secondary); font-size: var(--font-size-sm);">${apt.specialty}</div>
                    </div>
                    <div>
                        <span class="status status--success">Confirmed</span>
                    </div>
                </div>
            `).join('');
        }

        function displayAllAppointments() {
            const container = document.getElementById('all-appointments-list');
            const userAppointments = appData.appointments.filter(a => a.patientEmail === appData.currentUser.email);
            
            if (userAppointments.length === 0) {
                container.innerHTML = '<p class="text-center" style="color: var(--color-text-secondary); padding: var(--space-32);">No appointments scheduled yet. Book your first appointment!</p>';
                return;
            }
            
            container.innerHTML = userAppointments.map(apt => `
                <div class="appointment-card">
                    <div>
                        <div class="appointment-time">${apt.date} at ${apt.time}</div>
                        <div><strong>${apt.doctor}</strong></div>
                        <div style="color: var(--color-text-secondary); font-size: var(--font-size-sm);">${apt.specialty}</div>
                        ${apt.notes ? `<div style="margin-top: var(--space-8); font-size: var(--font-size-sm);">Notes: ${apt.notes}</div>` : ''}
                    </div>
                    <div>
                        <span class="status status--success">Confirmed</span>
                    </div>
                </div>
            `).join('');
        }

        // Symptom Checker
        let symptomState = {
            currentQuestion: 0,
            answers: {},
            questions: []
        };

        function initSymptomChecker() {
            symptomState = {
                currentQuestion: 0,
                answers: {},
                questions: buildQuestionFlow()
            };
            renderSymptomChecker();
        }

        function buildQuestionFlow() {
            return [
                {
                    id: 'reason',
                    text: 'What brings you here today?',
                    type: 'options',
                    options: ['General checkup', 'Specific symptoms', 'Follow-up', 'Emergency']
                },
                {
                    id: 'area',
                    text: 'Where is the primary area of concern?',
                    type: 'options',
                    options: ['Head', 'Chest', 'Abdomen', 'Limbs', 'Back', 'Other'],
                    condition: (answers) => answers.reason === 'Specific symptoms'
                },
                {
                    id: 'chest_pain',
                    text: 'Are you experiencing chest pain?',
                    type: 'options',
                    options: ['Yes', 'No'],
                    condition: (answers) => answers.area === 'Chest'
                },
                {
                    id: 'pain_type',
                    text: 'How would you describe the pain?',
                    type: 'options',
                    options: ['Sharp', 'Dull', 'Pressure', 'Burning'],
                    condition: (answers) => answers.chest_pain === 'Yes'
                },
                {
                    id: 'pain_radiates',
                    text: 'Does the pain radiate to other areas?',
                    type: 'options',
                    options: ['Yes', 'No'],
                    condition: (answers) => answers.chest_pain === 'Yes'
                },
                {
                    id: 'headache_type',
                    text: 'What type of headache are you experiencing?',
                    type: 'options',
                    options: ['Migraine', 'Tension', 'Cluster', 'Other'],
                    condition: (answers) => answers.area === 'Head'
                },
                {
                    id: 'headache_duration',
                    text: 'How long have you had this headache?',
                    type: 'options',
                    options: ['Less than 1 hour', 'Hours', 'Days', 'Weeks'],
                    condition: (answers) => answers.area === 'Head'
                },
                {
                    id: 'fever',
                    text: 'Do you have a fever?',
                    type: 'options',
                    options: ['Yes', 'No', 'Unsure']
                },
                {
                    id: 'temperature',
                    text: 'What is your temperature? (in ¬∞F)',
                    type: 'input',
                    condition: (answers) => answers.fever === 'Yes'
                },
                {
                    id: 'pain_scale',
                    text: 'Rate your pain intensity',
                    type: 'slider',
                    min: 1,
                    max: 10
                },
                {
                    id: 'other_symptoms',
                    text: 'Do you have any other symptoms?',
                    type: 'checkbox',
                    options: ['Nausea', 'Dizziness', 'Fatigue', 'Shortness of breath', 'Cough', 'Fever', 'Chills']
                },
                {
                    id: 'symptom_duration',
                    text: 'How long have symptoms persisted?',
                    type: 'options',
                    options: ['Less than 24 hours', '1-3 days', '3-7 days', 'Over a week']
                },
                {
                    id: 'medication',
                    text: 'Have you taken any medication?',
                    type: 'options',
                    options: ['Yes', 'No']
                },
                {
                    id: 'medication_name',
                    text: 'What medication have you taken?',
                    type: 'input',
                    condition: (answers) => answers.medication === 'Yes'
                },
                {
                    id: 'allergies',
                    text: 'Do you have any known allergies?',
                    type: 'input',
                    placeholder: 'List any allergies or type "None"'
                },
                {
                    id: 'chronic_conditions',
                    text: 'Do you have any chronic conditions?',
                    type: 'checkbox',
                    options: ['Diabetes', 'Hypertension', 'Asthma', 'Heart Disease', 'None']
                }
            ];
        }

        function getActiveQuestions() {
            return symptomState.questions.filter(q => {
                if (!q.condition) return true;
                return q.condition(symptomState.answers);
            });
        }

        function renderSymptomChecker() {
            const container = document.getElementById('symptom-checker-content');
            const activeQuestions = getActiveQuestions();
            
            if (symptomState.currentQuestion >= activeQuestions.length) {
                renderResults();
                return;
            }
            
            const question = activeQuestions[symptomState.currentQuestion];
            const progress = ((symptomState.currentQuestion + 1) / activeQuestions.length) * 100;
            
            let questionHTML = '';
            
            if (question.type === 'options') {
                questionHTML = `
                    <div class="options-grid">
                        ${question.options.map(opt => `
                            <button class="option-btn ${symptomState.answers[question.id] === opt ? 'selected' : ''}" 
                                    onclick="selectOption('${question.id}', '${opt}')">
                                ${opt}
                            </button>
                        `).join('')}
                    </div>
                `;
            } else if (question.type === 'checkbox') {
                questionHTML = `
                    <div class="checkbox-group">
                        ${question.options.map(opt => `
                            <label class="checkbox-option">
                                <input type="checkbox" 
                                       onchange="toggleCheckbox('${question.id}', '${opt}')" 
                                       ${(symptomState.answers[question.id] || []).includes(opt) ? 'checked' : ''}>
                                <span>${opt}</span>
                            </label>
                        `).join('')}
                    </div>
                `;
            } else if (question.type === 'slider') {
                const value = symptomState.answers[question.id] || 5;
                questionHTML = `
                    <div class="slider-container">
                        <input type="range" class="slider" min="${question.min}" max="${question.max}" 
                               value="${value}" oninput="updateSlider('${question.id}', this.value)">
                        <div class="slider-value">${value}/10</div>
                    </div>
                `;
            } else if (question.type === 'input') {
                questionHTML = `
                    <input type="text" class="form-control" 
                           placeholder="${question.placeholder || 'Your answer'}" 
                           value="${symptomState.answers[question.id] || ''}" 
                           oninput="symptomState.answers['${question.id}'] = this.value">
                `;
            }
            
            container.innerHTML = `
                <div class="checker-card fade-in">
                    <div class="progress-bar-container">
                        <div class="progress-bar" style="width: ${progress}%"></div>
                    </div>
                    <div style="text-align: center; margin-bottom: var(--space-24); color: var(--color-text-secondary);">
                        Question ${symptomState.currentQuestion + 1} of ${activeQuestions.length}
                    </div>
                    <div class="question-container">
                        <h2 class="question-text">${question.text}</h2>
                        ${questionHTML}
                    </div>
                    <div class="navigation-buttons">
                        <button class="btn btn-secondary" onclick="previousQuestion()" 
                                ${symptomState.currentQuestion === 0 ? 'disabled' : ''}>
                            ‚Üê Previous
                        </button>
                        <button class="btn btn-primary" onclick="nextQuestion()">
                            ${symptomState.currentQuestion === activeQuestions.length - 1 ? 'Complete Assessment' : 'Next ‚Üí'}
                        </button>
                    </div>
                </div>
            `;
        }

        function selectOption(questionId, option) {
            symptomState.answers[questionId] = option;
            renderSymptomChecker();
        }

        function toggleCheckbox(questionId, option) {
            if (!symptomState.answers[questionId]) {
                symptomState.answers[questionId] = [];
            }
            const index = symptomState.answers[questionId].indexOf(option);
            if (index > -1) {
                symptomState.answers[questionId].splice(index, 1);
            } else {
                symptomState.answers[questionId].push(option);
            }
        }

        function updateSlider(questionId, value) {
            symptomState.answers[questionId] = value;
            renderSymptomChecker();
        }

        function nextQuestion() {
            symptomState.currentQuestion++;
            renderSymptomChecker();
        }

        function previousQuestion() {
            symptomState.currentQuestion--;
            renderSymptomChecker();
        }

        function renderResults() {
            const triage = calculateTriage(symptomState.answers);
            const assessment = {
                patientEmail: appData.currentUser.email,
                patientName: appData.currentUser.name,
                date: new Date().toLocaleDateString(),
                time: new Date().toLocaleTimeString(),
                answers: symptomState.answers,
                triage: triage
            };
            
            appData.symptomAssessments.push(assessment);
            updatePatientStats();
            
            const container = document.getElementById('symptom-checker-content');
            container.innerHTML = `
                <div class="checker-card fade-in">
                    <div class="results-container">
                        <h2 style="margin-bottom: var(--space-24);">Assessment Complete</h2>
                        <div class="triage-badge triage-${triage.level}">
                            ${triage.icon} ${triage.label}
                        </div>
                        <h3 style="margin: var(--space-24) 0;">${triage.action}</h3>
                        <p style="color: var(--color-text-secondary); margin-bottom: var(--space-24);">
                            ${triage.description}
                        </p>
                        
                        <div class="results-summary">
                            <h3>Assessment Summary</h3>
                            <ul class="symptom-list">
                                ${Object.entries(symptomState.answers).map(([key, value]) => {
                                    const question = symptomState.questions.find(q => q.id === key);
                                    if (!question) return '';
                                    const displayValue = Array.isArray(value) ? value.join(', ') : value;
                                    return `<li><strong>${question.text}</strong><br>${displayValue}</li>`;
                                }).join('')}
                            </ul>
                        </div>
                        
                        ${triage.specialist ? `<p style="margin-top: var(--space-24);"><strong>Recommended Specialist:</strong> ${triage.specialist}</p>` : ''}
                        
                        <div class="result-actions">
                            <button class="btn btn-primary" onclick="showPatientSection('appointments')">
                                üìÖ Book Appointment
                            </button>
                            <button class="btn btn-secondary" onclick="showResourceTab('hospital-locator')">
                                üè• Find Hospital
                            </button>
                            <button class="btn btn-secondary" onclick="initSymptomChecker()">
                                üîÑ Start Over
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function calculateTriage(answers) {
            let score = 0;
            let specialist = 'General Medicine';
            
            // Emergency indicators
            if (answers.chest_pain === 'Yes' && (answers.pain_type === 'Pressure' || answers.pain_radiates === 'Yes')) {
                return {
                    level: 'emergency',
                    label: 'EMERGENCY',
                    action: 'Seek immediate emergency care - Call 911 or go to ER',
                    icon: 'üö®',
                    description: 'Your symptoms suggest a potentially serious condition that requires immediate medical attention.',
                    specialist: 'Emergency Medicine / Cardiology'
                };
            }
            
            if (answers.reason === 'Emergency') {
                return {
                    level: 'emergency',
                    label: 'EMERGENCY',
                    action: 'Seek immediate emergency care',
                    icon: 'üö®',
                    description: 'Please go to the nearest emergency room or call 911 immediately.',
                    specialist: 'Emergency Medicine'
                };
            }
            
            // Calculate severity score
            if (answers.pain_scale > 7) score += 3;
            else if (answers.pain_scale > 4) score += 2;
            else score += 1;
            
            if (answers.fever === 'Yes') score += 2;
            if (answers.symptom_duration === 'Over a week') score += 2;
            if ((answers.other_symptoms || []).length > 3) score += 2;
            
            // Determine specialist based on area
            if (answers.area === 'Chest') specialist = 'Cardiology';
            else if (answers.area === 'Head') specialist = 'Neurology';
            else if (answers.area === 'Back' || answers.area === 'Limbs') specialist = 'Orthopedics';
            
            // Determine triage level
            if (score >= 7) {
                return {
                    level: 'urgent',
                    label: 'URGENT',
                    action: 'Schedule appointment within 24 hours',
                    icon: '‚ö†Ô∏è',
                    description: 'Your symptoms require prompt medical attention. Please schedule an appointment as soon as possible.',
                    specialist: specialist
                };
            } else if (score >= 4) {
                return {
                    level: 'soon',
                    label: 'SCHEDULE SOON',
                    action: 'Schedule appointment within 1 week',
                    icon: 'üìÖ',
                    description: 'You should see a doctor soon to address your symptoms.',
                    specialist: specialist
                };
            } else if (score >= 2) {
                return {
                    level: 'routine',
                    label: 'ROUTINE',
                    action: 'Schedule routine checkup',
                    icon: '‚úì',
                    description: 'A routine medical checkup is recommended to discuss your concerns.',
                    specialist: 'General Medicine'
                };
            } else {
                return {
                    level: 'self-care',
                    label: 'SELF-CARE',
                    action: 'Monitor symptoms and try home remedies',
                    icon: '‚ÑπÔ∏è',
                    description: 'Your symptoms appear mild. Monitor them and seek medical care if they worsen or persist.',
                    specialist: null
                };
            }
        }

        // Appointment Booking
        let appointmentState = {
            step: 1,
            selectedSpecialty: null,
            selectedDoctor: null,
            selectedDate: null,
            selectedTime: null,
            notes: ''
        };

        function initAppointmentBooking() {
            appointmentState = { step: 1, selectedSpecialty: null, selectedDoctor: null, selectedDate: null, selectedTime: null, notes: '' };
            renderAppointmentBooking();
        }

        function renderAppointmentBooking() {
            const container = document.getElementById('appointment-content');
            
            if (appointmentState.step === 1) {
                container.innerHTML = `
                    <div class="fade-in">
                        <div class="dashboard-header">
                            <h1>Book an Appointment</h1>
                            <p class="dashboard-subtitle">Step 1: Select a Medical Specialty</p>
                        </div>
                        <div class="specialty-grid">
                            ${['General Medicine', 'Cardiology', 'Neurology', 'Orthopedics', 'Pediatrics', 'Dermatology'].map(spec => `
                                <div class="specialty-card ${appointmentState.selectedSpecialty === spec ? 'selected' : ''}" 
                                     onclick="selectSpecialty('${spec}')">
                                    <div style="font-size: 48px; margin-bottom: var(--space-12);">
                                        ${getSpecialtyIcon(spec)}
                                    </div>
                                    <div style="font-weight: var(--font-weight-semibold);">${spec}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="mt-24">
                            <button class="btn btn-primary btn-large" onclick="appointmentState.step = 2; renderAppointmentBooking()" 
                                    ${!appointmentState.selectedSpecialty ? 'disabled' : ''}>
                                Continue to Doctor Selection ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            } else if (appointmentState.step === 2) {
                const doctors = sampleDoctors.filter(d => d.specialization === appointmentState.selectedSpecialty);
                container.innerHTML = `
                    <div class="fade-in">
                        <div class="dashboard-header">
                            <h1>Book an Appointment</h1>
                            <p class="dashboard-subtitle">Step 2: Select a Doctor</p>
                        </div>
                        <div class="doctor-list">
                            ${doctors.map(doc => `
                                <div class="doctor-card" onclick="selectDoctor('${doc.name}')" 
                                     style="${appointmentState.selectedDoctor === doc.name ? 'border-color: var(--color-primary);' : ''}">
                                    <div class="doctor-avatar">üë®‚Äç‚öïÔ∏è</div>
                                    <div class="doctor-info">
                                        <div class="doctor-name">${doc.name}</div>
                                        <div class="doctor-specialty">${doc.specialization}</div>
                                        <div class="doctor-meta">
                                            <span>‚≠ê ${doc.rating}</span>
                                            <span>üìÖ ${doc.availability}</span>
                                            <span>üéì ${doc.experience} experience</span>
                                        </div>
                                    </div>
                                    <div>
                                        <button class="btn btn-primary">Select</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="navigation-buttons mt-24">
                            <button class="btn btn-secondary" onclick="appointmentState.step = 1; renderAppointmentBooking()">‚Üê Back</button>
                            <button class="btn btn-primary" onclick="appointmentState.step = 3; renderAppointmentBooking()" 
                                    ${!appointmentState.selectedDoctor ? 'disabled' : ''}>
                                Continue to Date Selection ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            } else if (appointmentState.step === 3) {
                container.innerHTML = `
                    <div class="fade-in">
                        <div class="dashboard-header">
                            <h1>Book an Appointment</h1>
                            <p class="dashboard-subtitle">Step 3: Select Date and Time</p>
                        </div>
                        <h3 class="mb-16">Select a Date</h3>
                        <div class="calendar-grid">
                            ${generateCalendarDays().map(day => `
                                <div class="calendar-day ${day.disabled ? 'disabled' : ''} ${appointmentState.selectedDate === day.date ? 'selected' : ''}" 
                                     onclick="${day.disabled ? '' : `selectDate('${day.date}')`}">
                                    <div style="font-size: var(--font-size-xs); color: var(--color-text-secondary);">${day.dayName}</div>
                                    <div style="font-size: var(--font-size-lg); font-weight: var(--font-weight-semibold);">${day.day}</div>
                                </div>
                            `).join('')}
                        </div>
                        ${appointmentState.selectedDate ? `
                            <h3 class="mt-24 mb-16">Select a Time</h3>
                            <div class="time-slots">
                                ${['09:00 AM', '10:00 AM', '11:00 AM', '02:00 PM', '03:00 PM', '04:00 PM', '05:00 PM'].map(time => `
                                    <div class="time-slot ${appointmentState.selectedTime === time ? 'selected' : ''}" 
                                         onclick="selectTime('${time}')">
                                        ${time}
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                        <div class="navigation-buttons mt-24">
                            <button class="btn btn-secondary" onclick="appointmentState.step = 2; renderAppointmentBooking()">‚Üê Back</button>
                            <button class="btn btn-primary" onclick="appointmentState.step = 4; renderAppointmentBooking()" 
                                    ${!appointmentState.selectedTime ? 'disabled' : ''}>
                                Continue to Confirmation ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            } else if (appointmentState.step === 4) {
                container.innerHTML = `
                    <div class="fade-in">
                        <div class="dashboard-header">
                            <h1>Confirm Appointment</h1>
                            <p class="dashboard-subtitle">Step 4: Review and Confirm</p>
                        </div>
                        <div class="checker-card">
                            <h3 class="mb-16">Appointment Details</h3>
                            <div style="background: var(--color-bg-1); padding: var(--space-20); border-radius: var(--radius-base); margin-bottom: var(--space-24);">
                                <div style="margin-bottom: var(--space-12);"><strong>Doctor:</strong> ${appointmentState.selectedDoctor}</div>
                                <div style="margin-bottom: var(--space-12);"><strong>Specialty:</strong> ${appointmentState.selectedSpecialty}</div>
                                <div style="margin-bottom: var(--space-12);"><strong>Date:</strong> ${appointmentState.selectedDate}</div>
                                <div><strong>Time:</strong> ${appointmentState.selectedTime}</div>
                            </div>
                            <div class="form-group">
                                <label>Additional Notes (Optional)</label>
                                <textarea class="form-control" rows="4" 
                                          placeholder="Any specific concerns or information for the doctor..." 
                                          oninput="appointmentState.notes = this.value"></textarea>
                            </div>
                        </div>
                        <div class="navigation-buttons mt-24">
                            <button class="btn btn-secondary" onclick="appointmentState.step = 3; renderAppointmentBooking()">‚Üê Back</button>
                            <button class="btn btn-success btn-large" onclick="confirmAppointment()">‚úì Confirm Appointment</button>
                        </div>
                    </div>
                `;
            }
        }

        function getSpecialtyIcon(specialty) {
            const icons = {
                'General Medicine': 'ü©∫',
                'Cardiology': '‚ù§Ô∏è',
                'Neurology': 'üß†',
                'Orthopedics': 'ü¶¥',
                'Pediatrics': 'üë∂',
                'Dermatology': 'üî¨'
            };
            return icons[specialty] || '‚öïÔ∏è';
        }

        function selectSpecialty(specialty) {
            appointmentState.selectedSpecialty = specialty;
            renderAppointmentBooking();
        }

        function selectDoctor(doctor) {
            appointmentState.selectedDoctor = doctor;
            renderAppointmentBooking();
        }

        function generateCalendarDays() {
            const days = [];
            const today = new Date();
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            for (let i = 0; i < 14; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                days.push({
                    date: date.toLocaleDateString(),
                    day: date.getDate(),
                    dayName: dayNames[date.getDay()],
                    disabled: i === 0 // Disable today
                });
            }
            return days;
        }

        function selectDate(date) {
            appointmentState.selectedDate = date;
            renderAppointmentBooking();
        }

        function selectTime(time) {
            appointmentState.selectedTime = time;
            renderAppointmentBooking();
        }

        function confirmAppointment() {
            const appointment = {
                id: 'APT' + Date.now(),
                patientEmail: appData.currentUser.email,
                patientName: appData.currentUser.name,
                doctor: appointmentState.selectedDoctor,
                specialty: appointmentState.selectedSpecialty,
                date: appointmentState.selectedDate,
                time: appointmentState.selectedTime,
                notes: appointmentState.notes,
                status: 'confirmed'
            };
            
            appData.appointments.push(appointment);
            updatePatientStats();
            
            showModal('Appointment Confirmed!', `
                <div class="text-center">
                    <div style="font-size: 64px; margin-bottom: var(--space-24);">‚úÖ</div>
                    <h3 style="margin-bottom: var(--space-16);">Your appointment has been booked successfully!</h3>
                    <div style="background: var(--color-bg-1); padding: var(--space-20); border-radius: var(--radius-base); margin-bottom: var(--space-24);">
                        <div style="margin-bottom: var(--space-12);"><strong>Appointment ID:</strong> ${appointment.id}</div>
                        <div style="margin-bottom: var(--space-12);"><strong>Doctor:</strong> ${appointment.doctor}</div>
                        <div style="margin-bottom: var(--space-12);"><strong>Date:</strong> ${appointment.date}</div>
                        <div><strong>Time:</strong> ${appointment.time}</div>
                    </div>
                    <p style="color: var(--color-text-secondary);">A confirmation has been recorded. You can view this in your appointments.</p>
                    <button class="btn btn-primary btn-large mt-16" onclick="closeModal(); showPatientSection('my-appointments')">View My Appointments</button>
                </div>
            `);
        }

        // Health Resources
        function initHealthResources() {
            const container = document.getElementById('resources-content');
            container.innerHTML = `
                <div class="resources-tabs">
                    <button class="tab-btn active" onclick="showResourceTab('articles')">üì∞ Health Articles</button>
                    <button class="tab-btn" onclick="showResourceTab('quizzes')">üéØ Health Quizzes</button>
                    <button class="tab-btn" onclick="showResourceTab('music')">üéµ Relaxation Music</button>
                    <button class="tab-btn" onclick="showResourceTab('hospital-locator')">üè• Hospital Locator</button>
                </div>
                <div id="tab-articles" class="tab-content active"></div>
                <div id="tab-quizzes" class="tab-content"></div>
                <div id="tab-music" class="tab-content"></div>
                <div id="tab-hospital-locator" class="tab-content"></div>
            `;
            
            showResourceTab('articles');
        }

        function showResourceTab(tab) {
            const tabs = ['articles', 'quizzes', 'music', 'hospital-locator'];
            tabs.forEach(t => {
                document.getElementById(`tab-${t}`).classList.remove('active');
            });
            document.getElementById(`tab-${tab}`).classList.add('active');
            
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (tab === 'articles') renderArticles();
            else if (tab === 'quizzes') renderQuizzes();
            else if (tab === 'music') renderMusicPlayer();
            else if (tab === 'hospital-locator') renderHospitalLocator();
        }

        function renderArticles() {
            const container = document.getElementById('tab-articles');
            container.innerHTML = `
                <div class="articles-grid fade-in">
                    ${healthArticles.map(article => `
                        <div class="article-card" onclick="showArticle('${article.title}')">
                            <div class="article-image">${getCategoryIcon(article.category)}</div>
                            <div class="article-content">
                                <span class="article-category">${article.category}</span>
                                <h3 class="article-title">${article.title}</h3>
                                <p class="article-excerpt">${article.excerpt}</p>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function getCategoryIcon(category) {
            const icons = {
                'Diabetes': 'üíâ',
                'Cardiology': '‚ù§Ô∏è',
                'Mental Health': 'üß†',
                'Nutrition': 'ü•ó',
                'Sleep Health': 'üò¥',
                'Fitness': 'üí™'
            };
            return icons[category] || 'üìÑ';
        }

        function showArticle(title) {
            const article = healthArticles.find(a => a.title === title);
            if (!article) return;
            
            showModal(article.title, `
                <div>
                    <div style="text-align: center; font-size: 64px; margin-bottom: var(--space-24);">${getCategoryIcon(article.category)}</div>
                    <span class="article-category" style="display: inline-block; margin-bottom: var(--space-16);">${article.category}</span>
                    <p style="line-height: 1.8; color: var(--color-text);">${article.content}</p>
                </div>
            `);
        }

        // Quiz
        let quizState = {
            currentQuestion: 0,
            score: 0,
            answers: [],
            showingAnswer: false
        };

        function renderQuizzes() {
            const container = document.getElementById('tab-quizzes');
            container.innerHTML = `
                <div class="fade-in">
                    <div class="quiz-container" id="quiz-container"></div>
                </div>
            `;
            startQuiz();
        }

        function startQuiz() {
            quizState = { currentQuestion: 0, score: 0, answers: [], showingAnswer: false };
            renderQuizQuestion();
        }

        function renderQuizQuestion() {
            const container = document.getElementById('quiz-container');
            
            if (quizState.currentQuestion >= quizQuestions.length) {
                renderQuizResults();
                return;
            }
            
            const question = quizQuestions[quizState.currentQuestion];
            
            container.innerHTML = `
                <div class="quiz-question fade-in">
                    <div class="question-number">Question ${quizState.currentQuestion + 1} of ${quizQuestions.length}</div>
                    <h3 style="margin-bottom: var(--space-24);">${question.question}</h3>
                    <div class="quiz-options">
                        ${question.options.map((option, index) => `
                            <button class="quiz-option ${quizState.showingAnswer ? (index === question.correct ? 'correct' : (quizState.answers[quizState.currentQuestion] === index ? 'incorrect' : '')) : ''}" 
                                    onclick="answerQuestion(${index})" 
                                    ${quizState.showingAnswer ? 'disabled' : ''}>
                                ${option}
                            </button>
                        `).join('')}
                    </div>
                    ${quizState.showingAnswer ? `
                        <div class="quiz-feedback">
                            <strong>${quizState.answers[quizState.currentQuestion] === question.correct ? '‚úÖ Correct!' : '‚ùå Incorrect'}</strong>
                            <p style="margin-top: var(--space-8);">${question.explanation}</p>
                            <button class="btn btn-primary mt-16" onclick="nextQuizQuestion()">Next Question ‚Üí</button>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function answerQuestion(answerIndex) {
            if (quizState.showingAnswer) return;
            
            quizState.answers[quizState.currentQuestion] = answerIndex;
            if (answerIndex === quizQuestions[quizState.currentQuestion].correct) {
                quizState.score++;
            }
            quizState.showingAnswer = true;
            renderQuizQuestion();
        }

        function nextQuizQuestion() {
            quizState.currentQuestion++;
            quizState.showingAnswer = false;
            renderQuizQuestion();
        }

        function renderQuizResults() {
            const container = document.getElementById('quiz-container');
            const percentage = Math.round((quizState.score / quizQuestions.length) * 100);
            
            container.innerHTML = `
                <div class="quiz-results fade-in">
                    <h2>Quiz Complete!</h2>
                    <div class="quiz-score">${percentage}%</div>
                    <h3>You got ${quizState.score} out of ${quizQuestions.length} questions correct!</h3>
                    <p style="color: var(--color-text-secondary); margin: var(--space-24) 0;">
                        ${percentage >= 80 ? 'Excellent work! You have great health knowledge.' : 
                          percentage >= 60 ? 'Good job! Keep learning about health.' : 
                          'Keep studying! Health knowledge is important.'}
                    </p>
                    <button class="btn btn-primary btn-large" onclick="startQuiz()">Take Quiz Again</button>
                </div>
            `;
        }

        // Music Player
        let playerState = {
            currentTrack: 0,
            isPlaying: false,
            progress: 0
        };

        function renderMusicPlayer() {
            const container = document.getElementById('tab-music');
            const track = musicTracks[playerState.currentTrack];
            
            container.innerHTML = `
                <div class="music-player fade-in">
                    <div class="now-playing">
                        <div class="album-art">üéµ</div>
                        <div class="track-info">
                            <h3>${track.title}</h3>
                            <div class="track-type">${track.type}</div>
                        </div>
                    </div>
                    
                    <div class="player-controls">
                        <button class="control-btn" onclick="previousTrack()">‚èÆ</button>
                        <button class="control-btn play-btn" onclick="togglePlay()">
                            ${playerState.isPlaying ? '‚è∏' : '‚ñ∂'}
                        </button>
                        <button class="control-btn" onclick="nextTrack()">‚è≠</button>
                    </div>
                    
                    <div class="progress-container">
                        <div class="time-labels">
                            <span>0:00</span>
                            <span>${track.duration}</span>
                        </div>
                        <div class="progress-track" onclick="seekTrack(event)">
                            <div class="progress-fill" style="width: ${playerState.progress}%"></div>
                        </div>
                    </div>
                    
                    <div class="playlist">
                        <h4>Playlist</h4>
                        ${musicTracks.map((t, i) => `
                            <div class="playlist-item ${i === playerState.currentTrack ? 'active' : ''}" 
                                 onclick="selectTrack(${i})">
                                <div>
                                    <div style="font-weight: var(--font-weight-medium);">${t.title}</div>
                                    <div style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">${t.type}</div>
                                </div>
                                <div>${t.duration}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function togglePlay() {
            playerState.isPlaying = !playerState.isPlaying;
            renderMusicPlayer();
            if (playerState.isPlaying) {
                simulatePlayback();
            }
        }

        function simulatePlayback() {
            if (!playerState.isPlaying) return;
            playerState.progress = (playerState.progress + 1) % 100;
            renderMusicPlayer();
            setTimeout(simulatePlayback, 1000);
        }

        function previousTrack() {
            playerState.currentTrack = (playerState.currentTrack - 1 + musicTracks.length) % musicTracks.length;
            playerState.progress = 0;
            renderMusicPlayer();
        }

        function nextTrack() {
            playerState.currentTrack = (playerState.currentTrack + 1) % musicTracks.length;
            playerState.progress = 0;
            renderMusicPlayer();
        }

        function selectTrack(index) {
            playerState.currentTrack = index;
            playerState.progress = 0;
            playerState.isPlaying = true;
            renderMusicPlayer();
            simulatePlayback();
        }

        function seekTrack(event) {
            const rect = event.currentTarget.getBoundingClientRect();
            const x = event.clientX - rect.left;
            playerState.progress = (x / rect.width) * 100;
            renderMusicPlayer();
        }

        // Hospital Locator
        let locatorState = {
            filters: [],
            searchTerm: ''
        };

        function renderHospitalLocator() {
            const container = document.getElementById('tab-hospital-locator');
            
            container.innerHTML = `
                <div class="fade-in">
                    <div class="locator-header">
                        <input type="text" class="form-control search-input" 
                               placeholder="Search by location..." 
                               oninput="locatorState.searchTerm = this.value">
                        <button class="btn btn-primary">üìç Use My Location</button>
                    </div>
                    
                    <div class="mock-map">
                        üó∫Ô∏è
                        <div class="map-marker" style="top: 40%; left: 50%;"></div>
                        <div class="map-marker" style="top: 60%; left: 30%;"></div>
                        <div class="map-marker" style="top: 30%; left: 70%;"></div>
                    </div>
                    
                    <div class="hospital-filters">
                        ${['24/7 Emergency', 'Trauma Center', 'Pediatric Care', 'Cardiology', 'All Hospitals'].map(filter => `
                            <div class="filter-chip ${locatorState.filters.includes(filter) ? 'active' : ''}" 
                                 onclick="toggleFilter('${filter}')">
                                ${filter}
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="hospitals-list">
                        ${hospitals.map(hospital => `
                            <div class="hospital-card">
                                <div class="hospital-header">
                                    <div>
                                        <div class="hospital-name">${hospital.name}</div>
                                        <div class="hospital-distance">${hospital.distance} away</div>
                                    </div>
                                    ${hospital.is_24_7 ? '<span class="emergency-badge">24/7</span>' : ''}
                                </div>
                                <div class="hospital-details">
                                    üìç ${hospital.address}<br>
                                    üìû ${hospital.emergency}
                                </div>
                                <div class="hospital-specialties">
                                    ${hospital.specialties.map(spec => `
                                        <span class="specialty-tag">${spec}</span>
                                    `).join('')}
                                </div>
                                <div class="hospital-actions">
                                    <button class="btn btn-secondary">üó∫Ô∏è Get Directions</button>
                                    ${hospital.is_24_7 ? '<button class="btn btn-danger">üö® Call Emergency</button>' : ''}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function toggleFilter(filter) {
            const index = locatorState.filters.indexOf(filter);
            if (index > -1) {
                locatorState.filters.splice(index, 1);
            } else {
                locatorState.filters.push(filter);
            }
            renderHospitalLocator();
        }

        // Doctor Dashboard
        function showDoctorDashboard() {
            hideAllPages();
            document.getElementById('doctor-dashboard').classList.remove('hidden');
            document.getElementById('doctor-name-sidebar').textContent = appData.currentUser.name;
            document.getElementById('doctor-welcome').textContent = `Welcome, ${appData.currentUser.name}!`;
            document.getElementById('doctor-specialty').textContent = appData.currentUser.specialization;
            updateDoctorStats();
            showDoctorSection('overview');
        }

        function showDoctorSection(section) {
            const sections = ['overview', 'queue', 'appointments'];
            sections.forEach(s => {
                document.getElementById(`doctor-${s}`).classList.add('hidden');
            });
            document.getElementById(`doctor-${section}`).classList.remove('hidden');
            
            const links = document.querySelectorAll('#doctor-dashboard .sidebar-link');
            links.forEach(link => link.classList.remove('active'));
            event.target.classList.add('active');
            
            if (section === 'queue') renderDoctorQueue();
            else if (section === 'appointments') renderDoctorAppointments();
        }

        function updateDoctorStats() {
            const todayAppointments = appData.appointments.filter(a => a.doctor === appData.currentUser.name);
            const pendingPatients = appData.symptomAssessments.length;
            
            document.getElementById('stat-today-appointments').textContent = todayAppointments.length;
            document.getElementById('stat-pending-patients').textContent = pendingPatients;
            document.getElementById('stat-completed').textContent = '0';
            
            renderUrgentQueue();
        }

        function renderUrgentQueue() {
            const container = document.getElementById('urgent-queue');
            const urgentPatients = appData.symptomAssessments
                .filter(a => a.triage.level === 'emergency' || a.triage.level === 'urgent')
                .slice(0, 3);
            
            if (urgentPatients.length === 0) {
                container.innerHTML = '<p class="text-center" style="color: var(--color-text-secondary);">No urgent patients at this time</p>';
                return;
            }
            
            container.innerHTML = urgentPatients.map(patient => renderPatientQueueCard(patient)).join('');
        }

        function renderDoctorQueue() {
            const container = document.getElementById('full-queue');
            
            if (appData.symptomAssessments.length === 0) {
                container.innerHTML = '<p class="text-center" style="color: var(--color-text-secondary); padding: var(--space-32);">No patients in queue</p>';
                return;
            }
            
            const sorted = [...appData.symptomAssessments].sort((a, b) => {
                const priority = { emergency: 0, urgent: 1, soon: 2, routine: 3, 'self-care': 4 };
                return priority[a.triage.level] - priority[b.triage.level];
            });
            
            container.innerHTML = sorted.map(patient => renderPatientQueueCard(patient)).join('');
        }

        function renderPatientQueueCard(patient) {
            return `
                <div class="queue-patient ${patient.triage.level}">
                    <div class="patient-details">
                        <h4>${patient.patientName}</h4>
                        <div class="patient-meta">
                            ${patient.date} at ${patient.time} ‚Ä¢ Triage: ${patient.triage.label}
                        </div>
                        <div class="chief-complaint">
                            <strong>Chief Complaint:</strong> ${getChiefComplaint(patient.answers)}
                        </div>
                        <button class="btn btn-secondary btn-sm" onclick="viewPatientReport('${patient.patientEmail}', '${patient.date}')">
                            üìÑ View Full Report
                        </button>
                    </div>
                    <div>
                        <select class="form-control" style="min-width: 150px;">
                            <option>Pending</option>
                            <option>In Progress</option>
                            <option>Completed</option>
                            <option>Referred</option>
                        </select>
                    </div>
                </div>
            `;
        }

        function getChiefComplaint(answers) {
            if (answers.reason) return answers.reason;
            if (answers.area) return `${answers.area} pain/discomfort`;
            return 'General assessment';
        }

        function viewPatientReport(email, date) {
            const assessment = appData.symptomAssessments.find(a => a.patientEmail === email && a.date === date);
            if (!assessment) return;
            
            showModal('Patient Assessment Report', `
                <div>
                    <div style="background: var(--color-bg-1); padding: var(--space-16); border-radius: var(--radius-base); margin-bottom: var(--space-24);">
                        <div style="margin-bottom: var(--space-8);"><strong>Patient:</strong> ${assessment.patientName}</div>
                        <div style="margin-bottom: var(--space-8);"><strong>Date:</strong> ${assessment.date} at ${assessment.time}</div>
                        <div><strong>Triage Level:</strong> <span class="triage-badge triage-${assessment.triage.level}">${assessment.triage.label}</span></div>
                    </div>
                    
                    <h4 style="margin-bottom: var(--space-16);">Symptoms &amp; Responses</h4>
                    <ul class="symptom-list">
                        ${Object.entries(assessment.answers).map(([key, value]) => {
                            const question = symptomState.questions.find(q => q.id === key);
                            if (!question) return '';
                            const displayValue = Array.isArray(value) ? value.join(', ') : value;
                            return `<li><strong>${question.text}</strong><br>${displayValue}</li>`;
                        }).join('')}
                    </ul>
                    
                    <div style="background: var(--color-bg-2); padding: var(--space-16); border-radius: var(--radius-base); margin-top: var(--space-24);">
                        <h4>AI Recommendation</h4>
                        <p>${assessment.triage.action}</p>
                        <p style="color: var(--color-text-secondary); margin-top: var(--space-8);">${assessment.triage.description}</p>
                    </div>
                </div>
            `);
        }

        function renderDoctorAppointments() {
            const container = document.getElementById('doctor-appointments-list');
            const doctorAppointments = appData.appointments.filter(a => a.doctor === appData.currentUser.name);
            
            if (doctorAppointments.length === 0) {
                container.innerHTML = '<p class="text-center" style="color: var(--color-text-secondary); padding: var(--space-32);">No appointments scheduled</p>';
                return;
            }
            
            container.innerHTML = doctorAppointments.map(apt => `
                <div class="appointment-card">
                    <div>
                        <div class="appointment-time">${apt.time}</div>
                        <div><strong>${apt.patientName}</strong></div>
                        <div style="color: var(--color-text-secondary); font-size: var(--font-size-sm);">${apt.specialty}</div>
                        ${apt.notes ? `<div style="margin-top: var(--space-8); font-size: var(--font-size-sm);">Notes: ${apt.notes}</div>` : ''}
                    </div>
                    <div>
                        <button class="btn btn-primary">Start Consultation</button>
                    </div>
                </div>
            `).join('');
        }

        // Modal
        function showModal(title, content) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-body').innerHTML = content;
            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        // Initialize
        window.addEventListener('click', (e) => {
            if (e.target.id === 'modal') {
                closeModal();
            }
        });
    </script>
</body>
</html>